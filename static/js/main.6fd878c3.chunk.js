(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{125:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r,a,c=n(1),s=n(0),i=n.n(s),o=n(68),u=n.n(o),l=n(10),j=n(15),d=n(39),b=n(40),p=n(45),f=n(44),O=(n(168),n(169),function(){return Object(c.jsx)("div",{className:"navbar",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/home",activeClassName:"active",children:"Home"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/users",activeClassName:"active",children:"Users"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/profile",activeClassName:"active",children:"Profile"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/chat",activeClassName:"active",children:"Chat"})}),Object(c.jsx)("li",{children:Object(c.jsx)(j.b,{to:"/login",activeClassName:"active",children:"Login"})})]})})}),h=n(28),x=n.p+"static/media/830.38a5c8dd.png",v=(n(171),function(){return Object(c.jsx)("div",{className:"loader",children:Object(c.jsx)("img",{src:x,alt:"img"})})}),m=n.p+"static/media/man-icon.cc23b0e9.png",g=n(126),S=n(127),y=(n(172),function(e){var t=e.title,n=e.onClick,r=e.disabled;return Object(c.jsx)("div",{className:"button",children:Object(c.jsx)("button",{onClick:n,disabled:r,children:t})})}),w=n(5),E=(n(77),function(e){var t=e.input,n=e.label,r=e.type,a=e.meta,s=a.touched,i=a.error,o=a.warning;return Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{children:Object(c.jsx)("b",{children:n})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{placeholder:n,type:r})),s&&(i&&Object(c.jsx)("span",{className:"error",children:i})||o&&Object(c.jsx)("span",{className:"error",children:o}))]})]})}),C=(n(59),Object(S.a)({form:"profile-data"})((function(e){var t=e.handleSubmit,n=e.profile,r=e.error;return Object(c.jsxs)("form",{onSubmit:t,className:"form-data",children:[r&&Object(c.jsx)("span",{className:"error",children:r}),Object(c.jsx)("div",{className:"buttonSave",children:Object(c.jsx)(y,{disabled:!1,title:"Save"})}),Object(c.jsx)(g.a,{name:"fullName",component:E,label:"full name"}),Object(c.jsx)(g.a,{name:"aboutMe",component:E,label:"about me"}),Object.keys(n.contacts).map((function(e){return Object(c.jsx)(g.a,{name:"contacts."+e,component:E,label:e},e)})),Object(c.jsxs)("label",{children:[Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:"My professional skills"})}),Object(c.jsx)(g.a,{name:"looking for a job description",component:"textarea"})]}),Object(c.jsx)(g.a,{name:"lookingForAJob",component:E,label:"looking for a job",type:"checkbox"})]})}))),_=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={editMod:!1,status:e.props.status},e.activateAditMod=function(){e.setState({editMod:!0})},e.deActivateAditMod=function(){e.setState({editMod:!1}),e.props.updateUserStatus(e.state.status)},e.onInputChange=function(t){e.setState({status:t.target.value})},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){var e=this.state,t=e.editMod,n=e.status;return Object(c.jsxs)("div",{className:"status-container",children:[!t&&Object(c.jsxs)("div",{className:"status",onClick:this.activateAditMod,children:[Object(c.jsx)("h3",{children:"Status: "}),Object(c.jsx)("span",{children:n})]}),t&&Object(c.jsx)("div",{children:Object(c.jsx)("input",{onBlur:this.deActivateAditMod,autoFocus:!0,defaultValue:this.props.status,onChange:this.onInputChange})})]})}}]),n}(s.Component),N=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMod;return Object(c.jsxs)("div",{className:"data-container",children:[n&&Object(c.jsx)("div",{children:Object(c.jsx)(y,{disabled:!1,title:"Edit",onClick:r})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h4",{children:["Full name: ",Object(c.jsx)("span",{children:t.fullName})]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h4",{children:["Looking for a job:"," ",Object(c.jsxs)("span",{children:[" ",t.lookingForAJob?"yes":"no"]})]})}),t.lookingForAJob&&Object(c.jsx)("div",{children:Object(c.jsxs)("h4",{children:["My professional skills:",Object(c.jsxs)("span",{children:[" ",t.lookingForAJobDescription," "]})]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h4",{children:["About me: ",Object(c.jsxs)("span",{children:[" ",t.aboutMe]})," "]})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Contacts"}),Object.keys(t.contacts).map((function(e){return Object(c.jsx)(T,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},T=function(e){var t=e.contactTitle,n=e.contactValue;return Object(c.jsx)("div",{children:Object(c.jsxs)("h4",{children:[t,": ",Object(c.jsxs)("span",{children:[" ",n]})]})})},k=function(e){var t=e.profile,n=e.isOwner,r=e.savePhoto,a=e.saveProfile,i=e.status,o=e.updateUserStatus,u=Object(s.useState)(!1),l=Object(h.a)(u,2),j=l[0],d=l[1];if(!t)return Object(c.jsx)(v,{});return Object(c.jsxs)("div",{className:"info-container",children:[Object(c.jsxs)("div",{className:"file",children:[Object(c.jsx)("img",{src:t.photos.large||m,alt:""}),Object(c.jsx)("div",{children:n&&Object(c.jsxs)("label",{htmlFor:"file",className:"label",children:["Change avatar",Object(c.jsx)("input",{type:"file",id:"file",className:"input-file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&r(e.target.files[0])}})]})}),Object(c.jsx)(_,{status:i,updateUserStatus:o})]}),Object(c.jsx)("div",{className:"file",children:j?Object(c.jsx)(C,{initialValues:t,profile:t,onSubmit:function(e){a(e).then((function(){d(!1)}))}}):Object(c.jsx)(N,{profile:t,isOwner:n,goToEditMod:function(){d(!0)}})})]})},U=n(7),P=n.n(U),A=n(14),I=n(35),L=n(131),R=n.n(L).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"6a776457-e59e-482f-ba70-10ff93f7c513"}}),F=function(e){return R.get("profile/"+e).then((function(e){return e.data}))},M=function(e){return R.get("profile/status/"+e).then((function(e){return e.data}))},G=function(e){return R.put("profile/status",{status:e}).then((function(e){return e.data}))},z=function(e){return R.put("profile",e).then((function(e){return e.data}))},D=function(e){var t=new FormData;return t.append("image",e),R.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},H={profile:null,status:""},V=function(e){return{type:"SET_USER_PROFILE",payload:e}},J=function(e){return{type:"SET_STATUS",payload:e}},W=function(e){return{type:"SAVE_PHOTO_SUCCESS",payload:e}},X=function(e){return function(){var t=Object(A.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:r=t.sent,n(V(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{profile:t.payload});case"SET_STATUS":return Object(w.a)(Object(w.a)({},e),{},{status:t.payload});case"SAVE_PHOTO_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{profile:Object(w.a)(Object(w.a)({},e.profile),{},{photos:t.payload})});default:return e}},Y=n(12),Z=n(11),q=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).profileRefresh=function(){var t=+e.props.match.params.userId;t||(t=e.props.authUserId)||e.props.history.push("/login"),e.props.getUserProfile(t),e.props.getUserStatus(t)},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.profileRefresh()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.profileRefresh()}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.match,r=e.savePhoto,a=e.saveProfile,s=e.status,i=e.updateUserStatus;return Object(c.jsx)("div",{className:"profile-container",children:Object(c.jsx)(k,{profile:t,isOwner:!n.params.userId,savePhoto:r,saveProfile:a,status:s,updateUserStatus:i})})}}]),n}(i.a.Component),K=Object(Z.d)(Y.h,Object(l.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.userId}}),{getUserProfile:X,getUserStatus:function(e){return function(){var t=Object(A.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:r=t.sent,n(J(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(A.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:0===t.sent.resultCode&&n(J(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(A.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:0===(r=t.sent).resultCode&&n(W(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(A.a)(P.a.mark((function t(n,r){var a,c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,z(e);case 3:if(0!==(c=t.sent).resultCode){t.next=12;break}if(null==a){t.next=9;break}n(X(a)),t.next=10;break;case 9:throw new Error("userId can not be null");case 10:t.next=14;break;case 12:return n(Object(I.a)("profile-data",{_error:c.messages[0]})),t.abrupt("return",Promise.reject(c.messages[0]));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}))(q),Q=(n(288),function(){return Object(c.jsx)("div",{className:"home"})}),$=(n(289),function(e){return e?void 0:"Required"}),ee=function(){return R.get("auth/me").then((function(e){return e.data}))},te=function(e,t,n,r){return R.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},ne=function(){return R.delete("auth/login").then((function(e){return e.data}))},re=function(){return R.get("security/get-captcha-url").then((function(e){return e.data}))},ae={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},ce=function(e,t,n,r){return{type:"SET_AUTH_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},se=function(e){return{type:"SET_CAPTCHA_URL",payload:{captchaUrl:e}}},ie=function(){return function(){var e=Object(A.a)(P.a.mark((function e(t){var n,r,a,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,c=r.email,s=r.login,t(ce(a,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe=function(){return function(){var e=Object(A.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:0===e.sent.resultCode&&t(ce(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ue=function(){return function(){var e=Object(A.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:n=e.sent,r=n.url,t(se(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER_DATA":case"SET_CAPTCHA_URL":return Object(w.a)(Object(w.a)({},e),t.payload);default:return e}},je=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.auth})),n=t.isAuth,r=t.captchaUrl;return n?Object(c.jsx)(Y.a,{to:"/profile"}):Object(c.jsxs)("div",{className:"login",children:[Object(c.jsx)("h1",{children:"Login"}),Object(c.jsx)(pe,{onSubmit:function(t){var n,r,a,c;e((n=t.email,r=t.password,a=t.rememberMe,c=t.captcha,function(){var e=Object(A.a)(P.a.mark((function e(t){var s,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n,r,a,c);case 2:0===(s=e.sent).resultCode?t(ie()):(10===s.resultCode&&t(ue()),i=s.messages.length>0?s.messages[0]:"Some error",t(Object(I.a)("login",{_error:i})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},captchaUrl:r})]})},de=(r=25,function(e){return e&&e.length>r?"Must be ".concat(r," characters or less"):void 0}),be=(a=4,function(e){return e&&e.length<a?"Must be ".concat(a," characters or more"):void 0}),pe=Object(S.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.captchaUrl,r=e.error;return Object(c.jsx)("form",{onSubmit:t,className:"form",children:Object(c.jsxs)("div",{className:"form-block",children:[Object(c.jsx)(g.a,{name:"email",component:E,type:"email",validate:[$,de,be],label:"Email"}),Object(c.jsx)(g.a,{name:"password",component:E,type:"password",validate:[$,de,be],label:"Password"}),Object(c.jsx)("label",{htmlFor:"rememberMe",children:Object(c.jsx)("b",{children:"Remember me"})}),Object(c.jsx)(g.a,{name:"rememberMe",component:"input",type:"checkbox"}),n&&Object(c.jsx)("img",{src:n,alt:"img"}),n&&Object(c.jsx)(g.a,{component:E,name:"captcha",label:"Captcha"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(y,{disabled:!1,title:"Submit"}),Object(c.jsx)("span",{children:r&&Object(c.jsx)("span",{className:"error",children:r})})]})]})})})),fe={initialization:!1},Oe=function(){return{type:"INITIALIZATION_SUCCESS"}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZATION_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{initialization:!0});default:return e}},xe=(n(290),n.p+"static/media/react-redux.45917d58.png"),ve=function(){var e=Object(l.d)((function(e){return e.auth})),t=e.isAuth,n=e.login,r=Object(l.c)();return Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:xe,alt:"img"})}),Object(c.jsx)("h1",{children:"Social Network React"}),Object(c.jsx)("div",{children:Object(c.jsx)("div",{children:t?Object(c.jsxs)("div",{children:[n," ",Object(c.jsx)("button",{onClick:r(oe),children:"LogOut"})," "]}):Object(c.jsx)("div",{children:Object(c.jsx)(j.b,{to:"/login",children:Object(c.jsx)("button",{children:"Login"})})})})})]})},me=n(56),ge=function(e,t,n,r){return R.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+("null"===r?"":"&friend=".concat(r))).then((function(e){return e.data}))},Se=function(e){return R.post("follow/".concat(e)).then((function(e){return e.data}))},ye=function(e){return R.delete("follow/".concat(e)).then((function(e){return e.data}))},we={users:[],pageSize:90,totalUsersCount:0,currentPage:1,isFetching:!1,followingProgress:[],filter:{term:"",friend:""}},Ee=function(e){return{type:"SET_USERS",payload:e}},Ce=function(e){return{type:"FOLLOW",payload:e}},_e=function(e){return{type:"UN_FOLLOW",payload:e}},Ne=function(e){return{type:"SET_TOTAL_USERS_COUNT",payload:e}},Te=function(e,t){return{type:"TOGGLE_FOLLOWING_PROGRESS",isFetching:e,userId:t}},ke=function(e){return{type:"SET_CURRENT_PAGE",payload:e}},Ue=function(e){return{type:"TOGGLE_IS_FETCHING",payload:e}},Pe=function(e){return{type:"SET_TERM",payload:e}},Ae=function(e,t,n){return function(){var r=Object(A.a)(P.a.mark((function r(a){var c;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(Ue(!0)),a(ke(e)),a(Pe(n)),r.next=5,ge(e,t,n.term,n.friend);case 5:c=r.sent,a(Ue(!1)),a(Ne(c.totalCount)),a(Ee(c.items));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(w.a)(Object(w.a)({},e),{},{users:t.payload});case"FOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload?Object(w.a)(Object(w.a)({},e),{},{followed:!0}):e}))});case"UN_FOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload?Object(w.a)(Object(w.a)({},e),{},{followed:!1}):e}))});case"SET_TOTAL_USERS_COUNT":return Object(w.a)(Object(w.a)({},e),{},{totalUsersCount:t.payload});case"SET_CURRENT_PAGE":return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.payload});case"TOGGLE_IS_FETCHING":return Object(w.a)(Object(w.a)({},e),{},{isFetching:t.payload});case"TOGGLE_FOLLOWING_PROGRESS":return Object(w.a)(Object(w.a)({},e),{},{followingProgress:t.isFetching?[].concat(Object(me.a)(e.followingProgress),[t.userId]):e.followingProgress.filter((function(e){return e!==t.userId}))});case"SET_TERM":return Object(w.a)(Object(w.a)({},e),{},{filter:t.payload});default:return e}},Le=n(75),Re=n.n(Le),Fe=(n(125),function(e){for(var t=e.totalUsersCount,n=e.pageSize,r=e.onPageChange,a=e.currentPage,i=e.portionSize,o=void 0===i?26:i,u=Math.ceil(t/n),l=[],j=1;j<u;j++)l.push(j);var d=Math.ceil(u/o),b=Object(s.useState)(1),p=Object(h.a)(b,2),f=p[0],O=p[1],x=(f-1)*o+1,v=f*o;return Object(c.jsxs)("div",{className:Re.a.paginator,children:[f>1&&Object(c.jsx)(y,{disabled:!1,onClick:function(){return O(f-1)},title:"Prev"}),l.filter((function(e){return e>=x&&e<=v})).map((function(e){return Object(c.jsx)("span",{onClick:function(){return r(e)},className:a===e?Re.a.page:"",children:Object(c.jsx)("span",{className:Re.a.pageNumber,children:e})},e)})),d>f&&Object(c.jsx)(y,{disabled:!1,onClick:function(){return O(f+1)},title:"Next"})]})}),Me=function(e){var t=e.user,n=e.followingProgress,r=Object(l.c)();return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"users-container",children:Object(c.jsxs)("div",{className:"user",children:[Object(c.jsx)("div",{className:"user-logo",children:Object(c.jsx)(j.b,{to:"/profile/"+t.id,children:Object(c.jsx)("img",{src:null!==t.photos.large?t.photos.large:m,alt:"img"})})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h3",{children:["User Name: ",Object(c.jsx)("span",{children:t.name})]})}),Object(c.jsxs)("div",{children:[t.followed&&Object(c.jsx)(y,{title:"UnFollow",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r((e=t.id,function(){var t=Object(A.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Te(!0,e)),t.next=3,ye(e);case 3:0===t.sent.resultCode&&n(_e(e)),n(Te(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}}),!t.followed&&Object(c.jsx)(y,{title:"Follow",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r((e=t.id,function(){var t=Object(A.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Te(!0,e)),t.next=3,Se(e);case 3:0===t.sent.resultCode&&n(Ce(e)),n(Te(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}})]})]})})})},Ge=n(57),ze=function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(Ge.c,{initialValues:{term:"",friend:""},validate:function(e){return{}},onSubmit:function(t,n){var r=n.setSubmitting;e.onFilterChange(t),r(!1)},children:function(e){var t=e.isSubmitting;return Object(c.jsxs)(Ge.b,{children:[Object(c.jsx)(Ge.a,{type:"text",name:"term",placeholder:"search"}),Object(c.jsxs)(Ge.a,{name:"friend",as:"select",children:[Object(c.jsx)("option",{value:"null",children:"All"}),Object(c.jsx)("option",{value:"true",children:"Only followed"}),Object(c.jsx)("option",{value:"false",children:"Only unFollowed"})]}),Object(c.jsx)("button",{type:"submit",disabled:t,children:"Search"})]})}})})},De=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.usersPage.isFetching})),n=Object(l.d)((function(e){return e.usersPage.users})),r=Object(l.d)((function(e){return e.usersPage.currentPage})),a=Object(l.d)((function(e){return e.usersPage.pageSize})),i=Object(l.d)((function(e){return e.usersPage.filter})),o=Object(l.d)((function(e){return e.usersPage.totalUsersCount})),u=Object(l.d)((function(e){return e.usersPage.followingProgress})),j=Object(Y.g)();Object(s.useEffect)((function(){e(Ae(r,a,i))}),[]),Object(s.useEffect)((function(){j.push({pathname:"/users",search:"?term=".concat(i.term,"&friend=").concat(i.friend,"&page=").concat(r)})}),[i,r,j]);return Object(c.jsxs)("div",{children:[t?Object(c.jsx)(v,{}):null,Object(c.jsx)(ze,{onFilterChange:function(t){e(Ae(1,a,t))}}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"pagination",children:Object(c.jsx)(Fe,{onPageChange:function(t){e(Ae(t,a,i))},totalUsersCount:o,pageSize:a,currentPage:r})}),n.map((function(e){return Object(c.jsx)(Me,{user:e,followingProgress:u},e.id)}))]})]})},He=function(){return Object(c.jsxs)("div",{children:[" ",Object(c.jsx)(Ve,{})]})},Ve=function(){var e=Object(s.useState)(null),t=Object(h.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){var e,t=function(){console.log("Close chanel"),setTimeout(n,3e3)},n=function(){var n,a,c;null===(n=e)||void 0===n||n.addEventListener("close",t),null===(a=e)||void 0===a||a.close(),null===(c=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===c||c.addEventListener("close",t),r(e)};return n(),function(){var n;null===(n=e)||void 0===n||n.removeEventListener("close",t),e.close()}}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)(Je,{ws:n}),Object(c.jsx)(Xe,{ws:n})]})},Je=function(e){var t=e.ws,n=Object(s.useState)([]),r=Object(h.a)(n,2),a=r[0],i=r[1];return Object(s.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);i((function(e){return[].concat(Object(me.a)(e),Object(me.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(c.jsx)("div",{style:{height:"300px",overflow:"auto",padding:"15px"},children:a.map((function(e,t){return Object(c.jsx)(We,{message:e},t)}))})},We=function(e){var t=e.message;return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:t.photo,alt:"/",style:{width:"50px"}}),Object(c.jsx)("b",{children:t.userName}),Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:t.message})}),Object(c.jsx)("hr",{})]})},Xe=function(e){var t=e.ws,n=Object(s.useState)(""),r=Object(h.a)(n,2),a=r[0],i=r[1],o=Object(s.useState)("padding"),u=Object(h.a)(o,2),l=u[0],j=u[1];Object(s.useEffect)((function(){var e=function(){j("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(c.jsxs)("div",{style:{padding:"15px"},children:[Object(c.jsx)("div",{children:Object(c.jsx)("textarea",{onChange:function(e){return i(e.currentTarget.value)},value:a})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{disabled:null===t||"ready"!==l,onClick:function(){a&&(null===t||void 0===t||t.send(a),i(""))},children:"Send Message"})})]})},Be=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.initializationApp()}},{key:"render",value:function(){return this.props.initializationApp?Object(c.jsxs)("div",{className:"app",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(ve,{}),Object(c.jsx)(O,{})]}),Object(c.jsxs)(Y.d,{children:[Object(c.jsx)(Y.b,{exact:!0,path:"/",component:Q}),Object(c.jsx)(Y.b,{path:"/home",component:Q}),Object(c.jsx)(Y.b,{path:"/users",component:De}),Object(c.jsx)(Y.b,{path:"/chat",component:He}),Object(c.jsx)(Y.b,{path:"/profile/:userId?",component:K}),Object(c.jsx)(Y.b,{path:"/login",component:je})]})]}):Object(c.jsx)(v,{})}}]),n}(i.a.Component),Ye=Object(Z.d)(Y.h,Object(l.b)((function(e){return{initialization:e.app.initialization}}),{initializationApp:function(){return function(){var e=Object(A.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ie());case 2:n=e.sent,Promise.all([n]).then((function(){t(Oe())}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Be),Ze=n(134),qe=n(128),Ke=Object(Z.c)({usersPage:Ie,profilePage:B,auth:le,form:qe.a,app:he}),Qe=Object(Z.e)(Ke,Object(Z.d)(Object(Z.a)(Ze.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));n(291);u.a.render(Object(c.jsx)(l.a,{store:Qe,children:Object(c.jsx)(j.a,{children:Object(c.jsx)(Ye,{})})}),document.getElementById("root"))},59:function(e,t,n){},75:function(e,t,n){e.exports={pageNumber:"paginator_pageNumber__2M_5j",page:"paginator_page__2CQ8A",paginator:"paginator_paginator__2YtPx"}},77:function(e,t,n){}},[[292,1,2]]]);
//# sourceMappingURL=main.6fd878c3.chunk.js.map